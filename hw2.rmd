---
title: "Visual Data Exploration"
author: "Bridget Viravouth & Vinny Nguyen"
date: "2025-05-01"
output: pdf_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
rm(list = ls()) # to rm all variables from the environment

library(tidyverse)
library(ggplot2)
library(dplyr)
```

```{r}
df <- read_csv("./INF143WhiteRabbit/fec_2008-2022.csv")
head(df)
# colnames(df)
dim(df) # 26828 rows x 51 columns
```

```{r}
df1 <- df %>% dplyr::select("Cand_Id", "Cand_Name", "Cand_Party_Affiliation")
head(df1)
```

```{r}
library(tidyquery)

party_table <- query("SELECT Cand_Party_Affiliation AS Party, COUNT(*) AS Count
FROM df
GROUP BY Party
ORDER BY Count DESC
LIMIT 5")

party_table

# Create a bar plot of the top 5 political parties
ggplot(data = party_table) + geom_col(mapping = aes(x = reorder(Party, -Count), y = Count, fill = Party)) +
  labs(x = "Political Party", y = "Number of Candidates")

ggsave("./INF143WhiteRabbit/plots/party_plot.png", width = 8, height = 6, dpi = 300)
```